(this["webpackJsonpbook-shelf"]=this["webpackJsonpbook-shelf"]||[]).push([[0],{122:function(e,t,a){e.exports=a(157)},127:function(e,t,a){},128:function(e,t,a){},157:function(e,t,a){"use strict";a.r(t);var n=a(0),l=a.n(n),r=a(11),o=a.n(r),i=(a(127),a(53)),s=a(35),c=(a(128),a(23)),u=a(221),m=a(206),d=a(201),h=a(93),g=a(208),p=a(207),f=a(59),E=a.n(f),b=a(75),v=a(196),k=a(199),w=a(14),y=a.n(w),x=Object(v.a)((function(e){return{paper:{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(1)},submit:{margin:e.spacing(3,0,2)}}}));function D(){var e=x(),t=l.a.useState(""),a=Object(c.a)(t,2),n=a[0],r=a[1],o=l.a.useState(""),i=Object(c.a)(o,2),f=i[0],v=i[1],w=Object(s.f)(),D=function(e){var t=e.target.name,a=e.target.value;"email"==t?r(a):"password"==t&&v(a)};return l.a.createElement(k.a,{component:"main",maxWidth:"xs"},l.a.createElement(d.a,null),l.a.createElement("div",{className:e.paper},l.a.createElement(u.a,{className:e.avatar},l.a.createElement(E.a,null)),l.a.createElement(b.a,{component:"h1",variant:"h5"},"Sign in"),l.a.createElement("form",{className:e.form,onSubmit:function(e){var t={email:n,password:f};y.a.post("http://ec2-13-235-103-88.ap-south-1.compute.amazonaws.com/api/v1/users/login/",t,{headers:{"Content-Type":"application/json"}}).then((function(e){console.log(e),200==e.status&&(localStorage.setItem("token",e.data.token),w.push("/home"))})).catch((function(e){console.log(e),alert("Invalid username.password")})),e.preventDefault()}},l.a.createElement(h.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"email",label:"Email Address",name:"email",autoFocus:!0,value:n,onChange:D}),l.a.createElement(h.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,name:"password",label:"Password",type:"password",id:"password",value:f,onChange:D}),l.a.createElement(m.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:e.submit},"Sign In"),l.a.createElement(p.a,{container:!0},l.a.createElement(p.a,{item:!0},l.a.createElement(g.a,{href:"/register",variant:"body2"},"Don't have an account? Sign Up"))))))}var _=a(101),O=a(213),j=a(218),S=a(214),C=a(215),A=a(74),N=a(96),T=a(62),B=a(63),I=a(65),q=a(64),W=a(16),F=a(66),z=a(158),G=a(98),H=a.n(G),M=a(97),V=a.n(M),L=a(220),J=a(212),U=a(210),P=a(211),R=a(209),Y=a(217),$=a(222),K=a(223),Q=a(204),X=a(216),Z="http://ec2-13-235-103-88.ap-south-1.compute.amazonaws.com/api/v1",ee=function(e){function t(e){var a;return Object(T.a)(this,t),(a=Object(I.a)(this,Object(q.a)(t).call(this,e))).handleChange=function(e){var t=e.target.name,n=e.target.value;a.setState(Object(N.a)({},t,n))},a.state={bookData:[],editDialogOpen:!1,showNewAuthor:!1,edit_name:"",edit_arrAuthors:[],edit_arrGenres:[],edit_id:0,delete_id:0,genreData:[],authorData:[],newAuthorName:"",dialogHeader:"Edit Book",dialogButtonText:"Update",filter_genre:null,filter_author:null},a.openEditDialog=a.openEditDialog.bind(Object(W.a)(a)),a.handleClose=a.handleClose.bind(Object(W.a)(a)),a.showHideField=a.showHideField.bind(Object(W.a)(a)),a.saveNewAuthor=a.saveNewAuthor.bind(Object(W.a)(a)),a.getData=a.getData.bind(Object(W.a)(a)),a.onSelectTag_gen=a.onSelectTag_gen.bind(Object(W.a)(a)),a.onSelectTag_auth=a.onSelectTag_auth.bind(Object(W.a)(a)),a.handleChange=a.handleChange.bind(Object(W.a)(a)),a.updateBook=a.updateBook.bind(Object(W.a)(a)),a.openDeleteDialog=a.openDeleteDialog.bind(Object(W.a)(a)),a.deleteBook=a.deleteBook.bind(Object(W.a)(a)),a.handleDelDialogClose=a.handleDelDialogClose.bind(Object(W.a)(a)),a}return Object(F.a)(t,e),Object(B.a)(t,[{key:"getData",value:function(){var e=this;y.a.get(Z+"/books/list/",{headers:{authorization:localStorage.getItem("token")}}).then((function(t){console.log(t),200==t.status&&e.setState({bookData:t.data.results})})).catch((function(e){console.log(e)})),y.a.get(Z+"/books/genres/",{headers:{authorization:localStorage.getItem("token")}}).then((function(t){console.log(t),200==t.status&&e.setState({genreData:t.data.results})})).catch((function(e){console.log(e)})),y.a.get(Z+"/users/authors/",{headers:{authorization:localStorage.getItem("token")}}).then((function(t){console.log(t),200==t.status&&e.setState({authorData:t.data.results})})).catch((function(e){console.log(e)}))}},{key:"componentDidMount",value:function(){this.getData()}},{key:"openEditDialog",value:function(e){if(null==e)this.setState({editDialogOpen:!0,edit_id:0,edit_arrAuthors:[],edit_arrGenres:[],edit_name:"",dialogButtonText:"Save",dialogHeader:"Add Book"});else{var t=JSON.parse(e);this.setState({editDialogOpen:!0,edit_id:t.id,edit_arrAuthors:t.author,edit_arrGenres:t.genre,edit_name:t.name,dialogButtonText:"Update",dialogHeader:"Edit Book"})}}},{key:"handleClose",value:function(){this.setState({editDialogOpen:!1})}},{key:"showHideField",value:function(e){this.setState({showNewAuthor:e})}},{key:"saveNewAuthor",value:function(){var e=this,t={name:this.state.newAuthorName};y.a.post(Z+"/users/author/create",t,{headers:{"Content-Type":"application/json",authorization:localStorage.getItem("token")}}).then((function(t){console.log(t),201==t.status&&e.setState({authorData:[].concat(Object(A.a)(e.state.authorData),[t.data]),edit_arrAuthors:[].concat(Object(A.a)(e.state.edit_arrAuthors),[t.data]),newAuthorName:"",showNewAuthor:!1})})).catch((function(e){console.log(e.response),alert("something went wrong")}))}},{key:"onSelectTag_gen",value:function(e,t){this.setState({edit_arrGenres:t})}},{key:"onSelectTag_auth",value:function(e,t){this.setState({edit_arrAuthors:t})}},{key:"updateBook",value:function(){for(var e=this,t=[],a=[],n=0;n<this.state.edit_arrAuthors.length;n++)t.push(this.state.edit_arrAuthors[n].id);for(var l=0;l<this.state.edit_arrGenres.length;l++)a.push(this.state.edit_arrGenres[l].id);var r={name:this.state.edit_name,author:t,genre:a};this.state.edit_id>0?y.a.put(Z+"/books/"+this.state.edit_id+"/",r,{headers:{"Content-Type":"application/json",authorization:localStorage.getItem("token")}}).then((function(t){console.log(t),201==t.status&&(e.setState({editDialogOpen:!1}),e.getData())})).catch((function(e){console.log(e.response),alert("something went wrong")})):y.a.post(Z+"/books/",r,{headers:{"Content-Type":"application/json",authorization:localStorage.getItem("token")}}).then((function(t){console.log(t),201==t.status&&(e.setState({editDialogOpen:!1}),e.getData())})).catch((function(e){console.log(e.response),alert("something went wrong")}))}},{key:"openDeleteDialog",value:function(e){this.setState({deleteDialogOpen:!0,delete_id:e})}},{key:"deleteBook",value:function(){var e=this;y.a.delete(Z+"/books/"+this.state.delete_id+"/",{headers:{authorization:localStorage.getItem("token")}}).then((function(t){console.log(t),201==t.status&&(e.setState({deleteDialogOpen:!1}),e.getData())})).catch((function(e){console.log(e.response),alert("something went wrong")}))}},{key:"handleDelDialogClose",value:function(){this.setState({deleteDialogOpen:!1})}},{key:"filterResult",value:function(){var e=this,t=Z+"/books/list";null!=this.state.filter_genre&&null!=this.state.filter_author?t+="?genre__id="+this.state.filter_genre+"&author__id="+this.state.filter_author:null!=this.state.filter_genre?t+="?genre__id="+this.state.filter_genre:t+="?author__id="+this.state.filter_author,y.a.get(t,{headers:{authorization:localStorage.getItem("token")}}).then((function(t){console.log(t),200==t.status&&e.setState({bookData:t.data.results})})).catch((function(e){console.log(e)}))}},{key:"render",value:function(){var e=this,t={"min-height":"40",width:600,border:1},a={width:200,border:1,margin:20};return l.a.createElement("div",null,l.a.createElement(p.a,{xs:12,container:!0,direction:"row",justify:"flex-end",alignItems:"center"},l.a.createElement("div",{xs:2},l.a.createElement(m.a,{variant:"contained",color:"primary",onClick:function(){e.openEditDialog(null)}},"Add New Book"))),l.a.createElement(p.a,{xs:12,container:!0,direction:"row",justify:"flex-start",alignItems:"center"},l.a.createElement("span",null,"Filter By: "),l.a.createElement(Q.a,null,l.a.createElement($.a,{id:"demo-simple-select-label"},"Genre"),l.a.createElement(X.a,{labelId:"demo-simple-select-label",id:"demo-simple-select",value:this.state.filter_genre,onChange:this.handleChange,name:"filter_genre",style:a},this.state.genreData.map((function(e,t){return l.a.createElement(K.a,{value:e.id},e.name)})))),l.a.createElement(Q.a,null,l.a.createElement($.a,{id:"demo-simple-select-label1"},"Author"),l.a.createElement(X.a,{labelId:"demo-simple-select-label1",id:"demo-simple-select1",value:this.state.filter_author,onChange:this.handleChange,name:"filter_author",style:a},this.state.authorData.map((function(e,t){return l.a.createElement(K.a,{value:e.id},e.name)})))),l.a.createElement(m.a,{variant:"contained",color:"primary",onClick:function(){e.filterResult()}},"Apply Filters")),l.a.createElement(p.a,{container:!0,direction:"row",justify:"flex-end",alignItems:"center",style:{flexGrow:1},spacing:"0"},l.a.createElement(p.a,{item:!0,xs:9},l.a.createElement(z.a,{style:{height:40,width:600,"background-color":"#f50057"},xs:12},l.a.createElement(p.a,{container:!0,justify:"center",spacing:"0"},l.a.createElement(p.a,{item:!0,xs:3},l.a.createElement("span",null,"Book")),l.a.createElement(p.a,{item:!0,xs:3},l.a.createElement("span",null,"Author(s)")),l.a.createElement(p.a,{item:!0,xs:3},l.a.createElement("span",null,"Genre(s)")),l.a.createElement(p.a,{item:!0,xs:3},l.a.createElement("span",null,"Actions"))))),this.state.bookData.map((function(a){return l.a.createElement(p.a,{item:!0,xs:9},l.a.createElement(z.a,{style:t,xs:12},l.a.createElement(p.a,{container:!0,justify:"center",spacing:"0"},l.a.createElement(p.a,{item:!0,xs:3},l.a.createElement("span",null,a.name)),l.a.createElement(p.a,{item:!0,xs:3},l.a.createElement("ul",null,a.author.map((function(e,t){return l.a.createElement("li",null,e.name)})))),l.a.createElement(p.a,{item:!0,xs:3},l.a.createElement("ul",null,a.genre.map((function(e,t){return l.a.createElement("li",null,e.name)})))),l.a.createElement(p.a,{item:!0,xs:3},l.a.createElement("span",null,l.a.createElement(V.a,{onClick:function(){e.openEditDialog(JSON.stringify(a))}}),l.a.createElement(H.a,{onClick:function(){e.openDeleteDialog(a.id)}}))))))}))),l.a.createElement(L.a,{open:this.state.editDialogOpen,onClose:this.handleClose,"aria-labelledby":"form-dialog-title"},l.a.createElement(R.a,{id:"form-dialog-title"},this.state.dialogHeader),l.a.createElement(U.a,null,l.a.createElement(P.a,null),l.a.createElement(h.a,{autoFocus:!0,margin:"dense",id:"Book",label:"Book",type:"text",fullWidth:!0,value:this.state.edit_name,onChange:this.handleChange,name:"edit_name"}),l.a.createElement(Y.a,{multiple:!0,id:"tags-standard",options:this.state.genreData,getOptionLabel:function(e){return e.name},value:this.state.edit_arrGenres,onChange:this.onSelectTag_gen,filterSelectedOptions:!0,renderInput:function(e){return l.a.createElement(h.a,Object.assign({},e,{variant:"standard",label:"Genere(s)",placeholder:"Favorites"}))}}),l.a.createElement(Y.a,{multiple:!0,id:"tags-standard",options:this.state.authorData,getOptionLabel:function(e){return e.name},value:this.state.edit_arrAuthors,onChange:this.onSelectTag_auth,filterSelectedOptions:!0,renderInput:function(e){return l.a.createElement(h.a,Object.assign({},e,{variant:"standard",label:"Author(s)",placeholder:"Favorites"}))}}),!this.state.showNewAuthor&&l.a.createElement(m.a,{onClick:function(){e.showHideField(!0)},color:"primary"},"Add New Author"),this.state.showNewAuthor&&l.a.createElement("div",null,l.a.createElement(h.a,{margin:"dense",id:"txtNewAuthor",label:"Author name",type:"text",name:"newAuthorName",fullWidth:!0,value:this.state.newAuthorName,onChange:this.handleChange}),l.a.createElement(m.a,{onClick:function(){e.showHideField(!1)},color:"primary"},"Cancel"),l.a.createElement(m.a,{onClick:function(){e.saveNewAuthor()},color:"primary"},"Save Author"))),l.a.createElement(J.a,null,l.a.createElement(m.a,{onClick:this.handleClose,color:"primary"},"Cancel"),l.a.createElement(m.a,{onClick:this.updateBook,color:"primary"},this.state.dialogButtonText))),l.a.createElement(L.a,{open:this.state.deleteDialogOpen,onClose:this.handleDelDialogClose,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description"},l.a.createElement(R.a,{id:"alert-dialog-title"},"Delete Book"),l.a.createElement(U.a,null,l.a.createElement(P.a,{id:"alert-dialog-description"},"Are you sure want to delete the selected book?")),l.a.createElement(J.a,null,l.a.createElement(m.a,{onClick:this.handleDelDialogClose,color:"primary"},"Cancel"),l.a.createElement(m.a,{onClick:this.deleteBook,color:"primary",autoFocus:!0},"Yes"))))}}]),t}(n.Component),te="http://ec2-13-235-103-88.ap-south-1.compute.amazonaws.com/api/v1",ae=function(e){function t(e){var a;return Object(T.a)(this,t),(a=Object(I.a)(this,Object(q.a)(t).call(this,e))).state={authorData:[],authorData_nob:[]},a}return Object(F.a)(t,e),Object(B.a)(t,[{key:"componentDidMount",value:function(){var e=this;y.a.get(te+"/books/author/1",{headers:{authorization:localStorage.getItem("token")}}).then((function(t){console.log(t),200==t.status&&e.setState({authorData:t.data.results})})).catch((function(e){console.log(e)})),y.a.get(te+"/books/author/0",{headers:{authorization:localStorage.getItem("token")}}).then((function(t){console.log(t),200==t.status&&e.setState({authorData_nob:t.data.results})})).catch((function(e){console.log(e)}))}},{key:"render",value:function(){var e={height:40,width:500,"background-color":"#f50057"},t={width:500};return l.a.createElement("div",null,l.a.createElement(p.a,{container:!0,style:{flexGrow:1},spacing:"0"},l.a.createElement(p.a,{item:!0,xs:6},l.a.createElement("h3",null,"Authors with books"),l.a.createElement(p.a,{item:!0,xs:10},l.a.createElement(z.a,{style:e},l.a.createElement(p.a,{container:!0,justify:"center",spacing:"0"},l.a.createElement(p.a,{item:!0,xs:6},l.a.createElement("span",null,"Author Name")),l.a.createElement(p.a,{item:!0,xs:6},l.a.createElement("span",null,"List of Books"))))),this.state.authorData.map((function(e){return l.a.createElement(p.a,{item:!0,xs:10},l.a.createElement(z.a,{style:t,xs:12},l.a.createElement(p.a,{container:!0,justify:"center",spacing:"0"},l.a.createElement(p.a,{item:!0,xs:6},l.a.createElement("span",null,e.name)),l.a.createElement(p.a,{item:!0,xs:6},l.a.createElement("ul",null,e.books.map((function(e,t){return l.a.createElement("li",null,e.name)})))))))}))),l.a.createElement(p.a,{item:!0,xs:6},l.a.createElement("h3",null,"Authors without books"),l.a.createElement(p.a,{item:!0,xs:10},l.a.createElement(z.a,{style:e},l.a.createElement(p.a,{container:!0,justify:"center",spacing:"0"},l.a.createElement(p.a,{item:!0,xs:6},l.a.createElement("span",null,"Author Name"))))),this.state.authorData_nob.map((function(e){return l.a.createElement(p.a,{item:!0,xs:10},l.a.createElement(z.a,{style:t,xs:12},l.a.createElement(p.a,{container:!0,justify:"center",spacing:"0"},l.a.createElement(p.a,{item:!0,xs:6},l.a.createElement("span",null,e.name)))))})))))}}]),t}(n.Component);function ne(e){var t=e.children,a=e.value,n=e.index,r=Object(_.a)(e,["children","value","index"]);return l.a.createElement(b.a,Object.assign({component:"div",role:"tabpanel",hidden:a!==n,id:"simple-tabpanel-".concat(n),"aria-labelledby":"simple-tab-".concat(n)},r),a===n&&l.a.createElement(C.a,{p:3},t))}function le(e){return{id:"simple-tab-".concat(e),"aria-controls":"simple-tabpanel-".concat(e)}}var re=Object(v.a)((function(e){return{root:{flexGrow:1,backgroundColor:e.palette.background.paper}}}));function oe(){var e=re(),t=l.a.useState(0),a=Object(c.a)(t,2),n=a[0],r=a[1],o=Object(s.f)();return l.a.createElement("div",{className:e.root},l.a.createElement(p.a,{xs:12,container:!0,direction:"row",justify:"flex-end",alignItems:"center"},l.a.createElement("div",{xs:2},l.a.createElement(m.a,{variant:"contained",color:"primary",onClick:function(){localStorage.removeItem("token"),o.push("/")}},"LogOut"))),l.a.createElement(O.a,{position:"static"},l.a.createElement(j.a,{value:n,onChange:function(e,t){r(t)},"aria-label":"simple tabs example",centered:!0,variant:"fullWidth"},l.a.createElement(S.a,Object.assign({label:"Books"},le(0))),l.a.createElement(S.a,Object.assign({label:"Authors"},le(1))))),l.a.createElement(ne,{value:n,index:0},l.a.createElement(ee,null)),l.a.createElement(ne,{value:n,index:1},l.a.createElement(ae,null)))}var ie=a(40),se=Object(v.a)((function(e){return{paper:{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(3)},submit:{margin:e.spacing(3,0,2)}}}));function ce(){var e=se(),t=l.a.useState(""),a=Object(c.a)(t,2),n=a[0],r=a[1],o=l.a.useState(""),i=Object(c.a)(o,2),h=i[0],f=i[1],v=l.a.useState(""),w=Object(c.a)(v,2),x=w[0],D=w[1],_=l.a.useState(""),O=Object(c.a)(_,2),j=O[0],S=O[1],C=l.a.useState(""),A=Object(c.a)(C,2),N=A[0],T=A[1],B=Object(s.f)(),I=l.a.useRef(),q=function(e){var t=e.target.name,a=e.target.value;switch(t){case"email":r(a);break;case"password":f(a);break;case"password2":D(a);break;case"firstName":S(a);break;case"lastName":T(a)}};return l.a.createElement(k.a,{component:"main",maxWidth:"xs"},l.a.createElement(d.a,null),l.a.createElement("div",{className:e.paper},l.a.createElement(u.a,{className:e.avatar},l.a.createElement(E.a,null)),l.a.createElement(b.a,{component:"h1",variant:"h5"},"Sign up"),l.a.createElement(ie.ValidatorForm,{ref:I,className:e.form,onSubmit:function(e){var t={first_name:j,last_name:N,email:n,password:h,password2:x};y.a.post("http://ec2-13-235-103-88.ap-south-1.compute.amazonaws.com/api/v1/users/register/",t,{headers:{"Content-Type":"application/json"}}).then((function(e){console.log(e),201==e.status&&(alert("your account created"),B.push("/"))})).catch((function(e){console.log(e.response),400==e.response.status&&void 0!=e.response.data&&null!=e.response.data?alert(e.response.data.email[0]):alert("something went wrong")})),e.preventDefault()}},l.a.createElement(p.a,{container:!0,spacing:2},l.a.createElement(p.a,{item:!0,xs:12,sm:6},l.a.createElement(ie.TextValidator,{name:"firstName",variant:"outlined",required:!0,fullWidth:!0,id:"firstName",label:"First Name",autoFocus:!0,value:j,onChange:q,validators:["required"],errorMessages:["this field is required"]})),l.a.createElement(p.a,{item:!0,xs:12,sm:6},l.a.createElement(ie.TextValidator,{variant:"outlined",required:!0,fullWidth:!0,id:"lastName",label:"Last Name",name:"lastName",value:N,onChange:q,validators:["required"],errorMessages:["this field is required"]})),l.a.createElement(p.a,{item:!0,xs:12},l.a.createElement(ie.TextValidator,{variant:"outlined",required:!0,fullWidth:!0,id:"email",label:"Email Address",name:"email",value:n,onChange:q,validators:["required","isEmail"],errorMessages:["this field is required","email is not valid"]})),l.a.createElement(p.a,{item:!0,xs:12},l.a.createElement(ie.TextValidator,{variant:"outlined",required:!0,fullWidth:!0,name:"password",label:"Password",type:"password",id:"password",value:h,onChange:q,validators:["required"],errorMessages:["this field is required"]})),l.a.createElement(p.a,{item:!0,xs:12},l.a.createElement(ie.TextValidator,{variant:"outlined",required:!0,fullWidth:!0,name:"password2",label:"Confirm Password",type:"password",value:x,onChange:q,validators:["required"],errorMessages:["this field is required"]}))),l.a.createElement(m.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:e.submit},"Sign Up"),l.a.createElement(p.a,{container:!0,justify:"flex-end"},l.a.createElement(p.a,{item:!0},l.a.createElement(g.a,{href:"/",variant:"body2"},"Already have an account? Sign in"))))))}var ue=function(){return l.a.createElement("div",{className:"App"},l.a.createElement(i.a,null,l.a.createElement("div",null,l.a.createElement(s.c,null,l.a.createElement(s.a,{exact:!0,path:"/"},l.a.createElement(D,null)),l.a.createElement(s.a,{exact:!0,path:"/register"},l.a.createElement(ce,null)),l.a.createElement(s.a,{exact:!0,path:"/home"},l.a.createElement(oe,null)),l.a.createElement(s.a,{path:"/books"},l.a.createElement(ee,null)),l.a.createElement(s.a,{path:"/authors"},l.a.createElement(ae,null))))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(l.a.createElement(ue,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[122,1,2]]]);
//# sourceMappingURL=main.1cbcdb1c.chunk.js.map